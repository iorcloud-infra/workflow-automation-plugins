FROM python
LABEL authors="mayank31313"

WORKDIR /workers
COPY ./pyproject.toml ./
RUN apt-get update
RUN pip3 install uv
RUN uv venv && uv sync
RUN playwright install

COPY alembic.ini /workers
COPY alembic /workers/alembic
COPY entrypoint.sh /workers/entrypoint.sh
COPY main.py /workers/main.py

ENTRYPOINT ["/workers/entrypoint.sh"]